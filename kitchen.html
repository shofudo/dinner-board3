<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>ã‚­ãƒƒãƒãƒ³è¡¨ç¤º - å¤•é£Ÿé€²è¡Œãƒœãƒ¼ãƒ‰</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* ã‚­ãƒƒãƒãƒ³è¡¨ç¤ºå°‚ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
      body {
        margin: 0;
        padding: 16px;
        background: #f8f9fa;
      }
      
      .kitchen-header {
        text-align: center;
        font-size: 32px;
        font-weight: bold;
        color: #333;
        margin-bottom: 20px;
        padding: 16px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
    </style>
  </head>
  <!-- ğŸ”§ SW & Cache killer (ä¸€æ™‚çš„) -->
<script>
(function() {
  // æ—¢å­˜ã® Service Worker ã‚’å…¨è§£é™¤
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.getRegistrations()
      .then(regs => regs.forEach(reg => reg.unregister()))
      .catch(()=>{});
  }
  // Cache Storage ã‚‚å…¨å‰Šé™¤
  if (window.caches && caches.keys) {
    caches.keys().then(keys => keys.forEach(k => caches.delete(k)));
  }
})();
</script>

  <body>
    <!-- ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="kitchen-header">
      ğŸ³ ã‚­ãƒƒãƒãƒ³è¡¨ç¤º
    </div>

    <!-- ã‚­ãƒƒãƒãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="kitchen-display">
      <!-- ã“ã“ã«æ–™ç†ã®é›†è¨ˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ -->
    </div>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getDatabase, ref, onValue, set, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

const firebaseConfig = {
  apiKey: "AIzaSyBArbWHqcazV8QGBHynPHQgqYyiAQn5mhw",
  authDomain: "dinner-management-d3580.firebaseapp.com",
  databaseURL: "https://dinner-management-d3580-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "dinner-management-d3580",
  storageBucket: "dinner-management-d3580.firebasestorage.app",
  messagingSenderId: "859809463635",
  appId: "1:859809463635:web:f276930f7dc721a02ff5a6"
};

const app = initializeApp(firebaseConfig);
const db  = getDatabase(app);

window.__db = { db, ref, onValue, set, serverTimestamp };
// â˜… Realtimeè³¼èª­ï¼šDBãŒå¤‰ã‚ã£ãŸã‚‰å³ã‚­ãƒƒãƒãƒ³ç”»é¢ã‚’å†æç”»
const boardRef = ref(db, 'dinner-board-v3');
onValue(boardRef, (snap) => {
  const state = snap.val() || {};
  if (window.updateKitchenDisplay) window.updateKitchenDisplay(state);
});

console.log('FirebaseåˆæœŸåŒ–OK(ã‚­ãƒƒãƒãƒ³è¡¨ç¤º)');
</script>

<script src="app.js?v=sync13"></script>
